---
title: "2021_LB_Forum"
author: "Naeem Chowdhury"
date: "3/1/2021"
output: html_document
---

# Setup

## Set Directories
```{r}
home <- getwd()
data.dir <- file.path(home, "data")
output.dir <- file.path(home, "output")
```

## Load Packages and fonts
```{r}
# install.packages('tidyverse')
library(tidyverse)
# install.packages('plotly')
library(plotly)
#install.packages('extrafont')
library(extrafont)


#font_import()
#loadfonts(device="win") 
```


## Data Read-in
```{r}
legacy.df <- read_csv(file.path(data.dir, 'old_members.csv')) %>% 
  slice_head(n = 322)
fresh.df <- read_csv(file.path(data.dir, '2019-2021_members.csv'))
```

# Analysis

## Side-by-Side Bar Plot

### Data restructuring

```{r}
# Issue 1: Remove repeated members
# RESOLVED Issue 2: Pull all language rows, removing NAs and repeated languages for a single person
# RESOLVED Issue 3: stack resulting language rows
# RESOLVED Issue 4: Group_by summarize count

lang.old.1 <- legacy.df %>% 
  select(`What CLS Language did you study?`) %>% 
  drop_na() %>% 
  rename(Language = `What CLS Language did you study?`)

lang.old.2 <- legacy.df %>%
  filter(`What CLS Language did you study?` != `What CLS Language did you study?_1`) %>% 
  select(`What CLS Language did you study?_1`) %>% 
  drop_na() %>% 
  rename(Language = `What CLS Language did you study?_1`)

lang.new.1 <- fresh.df %>% 
  select(`What CLS Language did you study?`) %>% 
  drop_na() %>% 
  rename(Language = `What CLS Language did you study?`)

lang.new.2 <- fresh.df %>% 
  filter(`What CLS Language did you study?` != `What CLS Language did you study?_1`) %>% 
  select(`What CLS Language did you study?_1`) %>% 
  drop_na() %>% 
  rename(Language = `What CLS Language did you study?_1`)


lang.all <- lang.old.1 %>% 
  add_row(lang.old.2) %>% 
  add_row(lang.new.1) %>% 
  mutate(n = 1)

lang.count <- lang.all %>% 
  group_by(Language) %>% 
  summarise(count = sum(n))
```

### Plot
```{r}

```

